(this.webpackJsonpcryptodash=this.webpackJsonpcryptodash||[]).push([[0],{343:function(e,t,r){e.exports=r(439)},438:function(e,t,r){},439:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(16),o=r.n(c),i=r(42),s=r.n(i),l=r(113),u=r(15),f=r(86),m=r(19),d=r(316),p=r.n(d),b=r(323),h=r.n(b),E=r(333),k=r.n(E),O=r(324),j=r.n(O),y=r(331),g=r.n(y),x=r(217),v=r.n(x),w=r(216),S=r.n(w),P=r(325),R=r.n(P),I=r(326),N=r.n(I),C=r(328),M=r.n(C),D=r(329),A=r.n(D),T=r(330),L=r.n(T),U=r(334),B=r.n(U),F=r(327),J=r.n(F),Q=r(332),q=r.n(Q),z=r(335),G=r.n(z),H=r(299);r(438);o.a.render(n.a.createElement((function(){var e=new AbortController,t="https://ratossrau3.execute-api.eu-west-1.amazonaws.com/prod",r={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},c={Add:Object(a.forwardRef)((function(e,t){return n.a.createElement(h.a,Object.assign({},e,{ref:t}))})),Check:Object(a.forwardRef)((function(e,t){return n.a.createElement(j.a,Object.assign({},e,{ref:t}))})),Clear:Object(a.forwardRef)((function(e,t){return n.a.createElement(S.a,Object.assign({},e,{ref:t}))})),Delete:Object(a.forwardRef)((function(e,t){return n.a.createElement(R.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return n.a.createElement(v.a,Object.assign({},e,{ref:t}))})),Edit:Object(a.forwardRef)((function(e,t){return n.a.createElement(N.a,Object.assign({},e,{ref:t}))})),Export:Object(a.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),Filter:Object(a.forwardRef)((function(e,t){return n.a.createElement(M.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(A.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(L.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(v.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(g.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return n.a.createElement(S.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return n.a.createElement(q.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return n.a.createElement(k.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,t){return n.a.createElement(B.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(a.forwardRef)((function(e,t){return n.a.createElement(G.a,Object.assign({},e,{ref:t}))}))},o=Object(a.useState)({exchangeRates:[{rateName:"USD",rate:1,symbol:"$"},{rateName:"GBP",rate:.89,symbol:"\xa3"}],selectedExchangeRate:[{rateName:"USD",rate:1,symbol:"$"}]}),i=Object(m.a)(o,2),d=i[0],b=i[1],E=Object(a.useState)({tickers:[{}],tickerId:"",tickerName:"",tickerSymbol:"",tickerPrice:""}),O=Object(m.a)(E,2),y=O[0],x=O[1],w=Object(a.useState)({portfoliocolumns:[{title:"Trade time",field:"tradetime"},{title:"Name",field:"name"},{title:"Symbol",field:"symbol"},{title:"Position",field:"position"},{title:"Price at trade ("+d.selectedExchangeRate[0].symbol+")",field:"tradePrice"},{title:"Active",field:"active"},{title:"Unrealised P&L  ("+d.selectedExchangeRate[0].symbol+")",field:"pl"}],positionData:[{}],precision:2,portfolioId:0,portfolioUnrealisedPL:0,portfolioRealisedPL:0}),P=Object(m.a)(w,2),I=P[0],C=P[1],D=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c,o,i,f,m,d,p,b,h,E,k,O,j,g,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(y.tickers),n=[],e.next=4,fetch(t+"/getTickers");case 4:return c=e.sent,e.next=7,c.json();case 7:if(o=e.sent,200===c.status){e.next=10;break}throw Error(o.message);case 10:for(i=!0,f=!1,m=void 0,e.prev=13,d=JSON.parse(o.body).Items[Symbol.iterator]();!(i=(p=d.next()).done);i=!0)b=p.value,(h={}).tickerId=parseInt(b.tickerId.N),h.tickerName=b.tickerName.S,h.tickerSymbol=b.tickerSymbol.S,n.push(h);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),f=!0,m=e.t0;case 21:e.prev=21,e.prev=22,i||null==d.return||d.return();case 24:if(e.prev=24,!f){e.next=27;break}throw m;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return a=n,E=Object(u.a)(y.tickerId.toString()),E=n[0].tickerId,k=Object(u.a)(y.tickerSymbol),k=n[0].tickerSymbol,O=Object(u.a)(y.tickerName),O=n[0].tickerName,j=Object(u.a)(y.tickerPrice.toString()),e.next=39,fetch(t+"/getPrice/"+parseInt(E));case 39:return g=e.sent,e.next=42,g.json();case 42:if(v=e.sent,200===g.status){e.next=47;break}throw Error(v.message);case 47:j=v.Item.cmcCacheData.M.quote.M.USD.M.price.N,x(Object(l.a)({},y,{tickers:a,tickerPrice:j,tickerId:E,tickerSymbol:k,tickerName:O}));case 49:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(s.a.mark((function e(a){var n,c,o,i,f,m,p,b,h,E,k,O,j,y,g,x,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(I.positionData),c=Object(u.a)(I.portfolioUnrealisedPL.toString()),o=Object(u.a)(I.portfolioRealisedPL.toString()),n=[],i=0,e.next=7,fetch(t+"/getPortfolio/"+I.portfolioId);case 7:return f=e.sent,e.next=10,f.json();case 10:if(m=e.sent,200===f.status){e.next=15;break}throw Error(m.message);case 15:if(p=[],"undefined"===typeof m.Item.positions.L){e.next=55;break}b=!0,h=!1,E=void 0,e.prev=20,k=m.Item.positions.L[Symbol.iterator]();case 22:if(b=(O=k.next()).done){e.next=41;break}return j=O.value,y=void 0,g=0,e.next=27,fetch(t+"/getPrice/"+j.M.currencyId.S);case 27:return x=e.sent,e.next=30,x.json();case 30:if(v=e.sent,200===x.status){e.next=35;break}throw Error(v.message);case 35:y=v.Item.cmcCacheData.M.quote.M.USD.M.price.N,j.M.active.BOOL&&(i+=(y-j.M.priceAtTrade.S)*j.M.positionQty.S,g=(y-j.M.priceAtTrade.S)*j.M.positionQty.S),p.push({id:j.M._id.S,portfolioId:I.portfolioId,tradetime:new Date(parseInt(j.M.DateTime.N)).toLocaleTimeString("en-GB",r),currencyId:j.M.currencyId.S,name:j.M.name.S,symbol:j.M.symbol.S,position:j.M.positionQty.S,tradePrice:j.M.priceAtTrade.S*d.selectedExchangeRate[0].rate,active:j.M.active.BOOL.toString(),pl:(g*d.selectedExchangeRate[0].rate).toFixed(I.precision)});case 38:b=!0,e.next=22;break;case 41:e.next=47;break;case 43:e.prev=43,e.t0=e.catch(20),h=!0,E=e.t0;case 47:e.prev=47,e.prev=48,b||null==k.return||k.return();case 50:if(e.prev=50,!h){e.next=53;break}throw E;case 53:return e.finish(50);case 54:return e.finish(47);case 55:n=p,c=i,o=m.Item.realisedPL.N,C(Object(l.a)({},I,{positionData:n,portfolioUnrealisedPL:c,portfolioRealisedPL:o}));case 59:case"end":return e.stop()}}),e,null,[[20,43,47,55],[48,,50,54]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(),T();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return U(),function(){e.abort()}}),[]);var F=function(e,t,r){for(var a=[],n=0;n<e.length;n++)e[n][r]===parseInt(t)&&a.push(e[n]);return a},Q=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c,o,i,f,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(y.tickerId.toString()),a=r.target.value,n=F(y.tickers,a,"tickerId"),c=Object(u.a)(y.tickerSymbol),c=n[0].tickerSymbol,o=Object(u.a)(y.tickerName),o=n[0].tickerName,i=Object(u.a)(y.tickerPrice.toString()),e.next=10,fetch(t+"/getPrice/"+parseInt(a));case 10:return f=e.sent,e.next=13,f.json();case 13:if(m=e.sent,200===f.status){e.next=18;break}throw Error(m.message);case 18:i=m.Item.cmcCacheData.M.quote.M.USD.M.price.N.toString(),x(Object(l.a)({},y,{tickerId:a,tickerPrice:i,tickerName:o,tickerSymbol:c}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=20;break}return(a=[]).push({portfolioId:I.portfolioId}),a.push({tradeDate:new Date}),a.push({positionQty:document.getElementById("positionQty").value}),a.push({tickerId:y.tickerId}),a.push({tickerName:y.tickerName}),a.push({tickerSymbol:y.tickerSymbol}),a.push({tickerPrice:y.tickerPrice}),e.next=11,fetch(t+"/postNewPosition",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Content-Type, Authorization"},body:JSON.stringify({post:a})});case 11:return n=e.sent,e.next=14,n;case 14:if(c=e.sent,200===n.status){e.next=19;break}throw Error(c.message);case 19:T();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+"/updateCache");case 2:return a=e.sent,e.next=5,a;case 5:if(n=e.sent,200===a.status){e.next=10;break}throw Error(n.message);case 10:D(),c=[],x(Object(l.a)({},y,{tickers:c})),T();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=14;break}return(a=[]).push({portfolioId:I.portfolioId}),e.next=5,fetch(t+"/resetPortfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:a})});case 5:return n=e.sent,e.next=8,n;case 8:if(c=e.sent,200===n.status){e.next=13;break}throw Error(c.message);case 13:setTimeout((function(){T()}),250);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=y.tickers.map((function(e){return n.a.createElement("option",{value:e.tickerId},e.tickerName)})),Z=d.exchangeRates.map((function(e){return n.a.createElement("option",{value:e.rateName},e.rateName)}));return n.a.createElement("div",null,n.a.createElement("div",{className:"outerDiv"},n.a.createElement("div",{className:"leftDiv"},n.a.createElement("h2",null,"CryptoDash")),n.a.createElement("div",{className:"midDiv"},n.a.createElement("h4",null,"Unrealised P&L Total: ",d.selectedExchangeRate[0].symbol+""+(I.portfolioUnrealisedPL*d.selectedExchangeRate[0].rate).toFixed(I.precision))),n.a.createElement("div",{className:"rightDiv"},n.a.createElement("h4",null,"Realised P&L Total: ",d.selectedExchangeRate[0].symbol+""+(I.portfolioRealisedPL*d.selectedExchangeRate[0].rate).toFixed(I.precision)))),n.a.createElement(p.a,{title:"Portfolio View",icons:c,columns:I.portfoliocolumns,data:I.positionData,editable:{onRowDelete:function(e){return new Promise((function(r){"true"===e.active?setTimeout((function(){fetch(t+"/getPrice/"+e.currencyId,{}).then((function(e){return e.json()})).then((function(a){var n=[];n.push({portfolioId:e.portfolioId}),n.push({table:"portfolios"}),n.push({positionId:e.id}),n.push({realisedPL:(a.Item.cmcCacheData.M.quote.M.USD.M.price.N-e.tradePrice)*e.position}),fetch(t+"/exitPosition",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Content-Type, Authorization"},body:JSON.stringify({post:n})}).then((function(e){T(),r()}))}))}),250):(alert("You cannot exit a closed position."),r())}))}}}),n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("h3",null,"Trade Entry"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Select currency"),n.a.createElement("td",null,n.a.createElement("select",{onChange:Q},Y))),n.a.createElement("tr",null,n.a.createElement("td",null,"Price of currency"),n.a.createElement("td",{id:"tickerPrice"},d.selectedExchangeRate[0].symbol+""+y.tickerPrice*d.selectedExchangeRate[0].rate)),n.a.createElement("tr",null,n.a.createElement("td",null,"Position quantity"),n.a.createElement("td",null,n.a.createElement("input",{id:"positionQty",type:"text"}))),n.a.createElement("tr",null,n.a.createElement("td",null),n.a.createElement("td",null,n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:z},"Trade"))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("h3",null,"System Control"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Reload cache"),n.a.createElement("td",null,n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:V},"Fluctuate prices +/-5%"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Reset portfolio"),n.a.createElement("td",null,n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:$},"Zero positions"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Currency to view (USD=",d.selectedExchangeRate[0].rate,")"),n.a.createElement("td",null,n.a.createElement("select",{onChange:function(e){var t=Object(u.a)(d.selectedExchangeRate),r=d.exchangeRates.find((function(t){return t.rateName===e.target.value}));(t=[]).push(r),b(Object(l.a)({},d,{selectedExchangeRate:t}))}},Z))))))}),null),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.51ab3715.chunk.js.map