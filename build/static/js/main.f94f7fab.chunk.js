(this.webpackJsonpcryptodash=this.webpackJsonpcryptodash||[]).push([[0],{206:function(e,t,r){e.exports=r(304)},299:function(e,t,r){},304:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(14),o=r.n(c),i=r(30),s=r.n(i),l=r(168),u=r(35),f=r(66),m=r(119),d=r(169),p=r.n(d),b=r(175),h=r.n(b),E=r(185),j=r.n(E),y=r(176),O=r.n(y),g=r(183),k=r.n(g),v=r(135),w=r.n(v),x=r(134),P=r.n(x),S=r(177),R=r.n(S),C=r(178),I=r.n(C),D=r(180),N=r.n(D),A=r(181),T=r.n(A),L=r(182),U=r.n(L),Q=r(186),q=r.n(Q),F=r(179),J=r.n(F),B=r(184),z=r.n(B),M=r(187),G=r.n(M),H=r(159);r(299);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}o.a.render(a.a.createElement((function(){var e=new AbortController,t="https://ivegwjoas2.execute-api.eu-west-1.amazonaws.com/prod",r={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},c={Add:Object(n.forwardRef)((function(e,t){return a.a.createElement(h.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return a.a.createElement(O.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return a.a.createElement(P.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return a.a.createElement(R.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return a.a.createElement(w.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return a.a.createElement(I.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return a.a.createElement(J.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return a.a.createElement(N.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(T.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(U.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(w.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(k.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return a.a.createElement(P.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return a.a.createElement(z.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return a.a.createElement(j.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return a.a.createElement(q.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return a.a.createElement(G.a,Object.assign({},e,{ref:t}))}))},o=Object(n.useState)({exchangeRates:[{rateName:"USD",rate:1,symbol:"$"},{rateName:"GBP",rate:.89,symbol:"\xa3"}],selectedExchangeRate:[{rateName:"USD",rate:1,symbol:"$"}]}),i=Object(m.a)(o,2),l=i[0],d=i[1],b=Object(n.useState)({tickers:[{}],tickerId:"",tickerName:"",tickerSymbol:"",tickerPrice:""}),E=Object(m.a)(b,2),y=E[0],g=E[1],v=Object(n.useState)({portfoliocolumns:[{title:"Trade time",field:"tradetime"},{title:"Name",field:"name"},{title:"Symbol",field:"symbol"},{title:"Position",field:"position"},{title:"Price at trade ("+l.selectedExchangeRate[0].symbol+")",field:"tradePrice"},{title:"Active",field:"active"},{title:"Unrealised P&L  ("+l.selectedExchangeRate[0].symbol+")",field:"pl"}],positionData:[{}],precision:2,portfolioId:0,portfolioUnrealisedPL:0,portfolioRealisedPL:0}),x=Object(m.a)(v,2),S=x[0],C=x[1],D=function(){var e=Object(f.a)(s.a.mark((function e(r){var n,a,c,o,i,l,f,m,d,p,b,h,E,j,O,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(y.tickers),a=[],e.next=4,fetch(t+"/getTickers");case 4:return c=e.sent,e.next=7,c.json();case 7:if(o=e.sent,200===c.status){e.next=10;break}throw Error(o.message);case 10:for(i=!0,l=!1,f=void 0,e.prev=13,m=o[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)p=d.value,a.push(p);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),l=!0,f=e.t0;case 21:e.prev=21,e.prev=22,i||null==m.return||m.return();case 24:if(e.prev=24,!l){e.next=27;break}throw f;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return n=a,b=Object(u.a)(y.tickerId),b=o[0].tickerId.toString(),h=Object(u.a)(y.tickerSymbol),h=o[0].tickerSymbol,E=Object(u.a)(y.tickerName),E=o[0].tickerName,j=Object(u.a)(y.tickerPrice.toString()),e.next=39,fetch(t+"/getPrice/"+b);case 39:return O=e.sent,e.next=42,O.json();case 42:if(k=e.sent,200===O.status){e.next=47;break}throw Error(k.message);case 47:j=k.Items[0].cmcCacheData.quote.USD.price.toString(),g($({},y,{tickers:n,tickerPrice:j,tickerId:b,tickerSymbol:h,tickerName:E}));case 49:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(s.a.mark((function e(n){var a,c,o,i,f,m,d,p,b,h,E,j,y,O,g,k,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(S.positionData),c=Object(u.a)(S.portfolioUnrealisedPL.toString()),o=Object(u.a)(S.portfolioRealisedPL.toString()),a=[],i=0,e.next=7,fetch(t+"/getPortfolio/"+S.portfolioId);case 7:return f=e.sent,e.next=10,f.json();case 10:if(m=e.sent,200===f.status){e.next=15;break}throw Error(m.message);case 15:d=[],p=!0,b=!1,h=void 0,e.prev=19,E=m.Items[0].positions[Symbol.iterator]();case 21:if(p=(j=E.next()).done){e.next=40;break}return y=j.value,O=void 0,g=0,e.next=26,fetch(t+"/getPrice/"+y.currencyId);case 26:return k=e.sent,e.next=29,k.json();case 29:if(v=e.sent,200===k.status){e.next=34;break}throw Error(v.message);case 34:O=v.Items[0].cmcCacheData.quote.USD.price.toString(),y.active&&(i+=(O-y.priceAtTrade)*y.positionQty,g=(O-y.priceAtTrade)*y.positionQty),d.push({id:y._id,portfolioId:m.Items[0].portfolioId,tradetime:new Date(y.DateTime).toLocaleTimeString("en-GB",r),currencyId:y.currencyId,name:y.name,symbol:y.symbol,position:y.positionQty,tradePrice:y.priceAtTrade*l.selectedExchangeRate[0].rate,active:y.active.toString(),pl:(g*l.selectedExchangeRate[0].rate).toFixed(S.precision)});case 37:p=!0,e.next=21;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(19),b=!0,h=e.t0;case 46:e.prev=46,e.prev=47,p||null==E.return||E.return();case 49:if(e.prev=49,!b){e.next=52;break}throw h;case 52:return e.finish(49);case 53:return e.finish(46);case 54:a=d,c=i,o=m.Items[0].realisedPL,C($({},S,{positionData:a,portfolioUnrealisedPL:c,portfolioRealisedPL:o}));case 58:case"end":return e.stop()}}),e,null,[[19,42,46,54],[47,,49,53]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(),A();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return L(),function(){e.abort()}}),[]);var Q=function(e,t,r){for(var n=[],a=0;a<e.length;a++)e[a][r]===parseInt(t)&&n.push(e[a]);return n},F=function(){var e=Object(f.a)(s.a.mark((function e(r){var n,a,c,o,i,l,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(y.tickerId),n=r.target.value,a=Q(y.tickers,n,"tickerId"),c=Object(u.a)(y.tickerSymbol),c=a[0].tickerSymbol,o=Object(u.a)(y.tickerName),o=a[0].tickerName,i=Object(u.a)(y.tickerPrice.toString()),e.next=10,fetch(t+"/getPrice/"+n);case 10:return l=e.sent,e.next=13,l.json();case 13:if(f=e.sent,200===l.status){e.next=18;break}throw Error(f.message);case 18:i=f.Items[0].cmcCacheData.quote.USD.price,g($({},y,{tickerId:n,tickerPrice:i,tickerName:o,tickerSymbol:c}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(s.a.mark((function e(r){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=20;break}return(n=[]).push({portfolioId:S.portfolioId}),n.push({tradeDate:new Date}),n.push({positionQty:document.getElementById("positionQty").value}),n.push({tickerId:y.tickerId}),n.push({tickerName:y.tickerName}),n.push({tickerSymbol:y.tickerSymbol}),n.push({tickerPrice:y.tickerPrice}),e.next=11,fetch(t+"/postNewPosition",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Content-Type, Authorization"},body:JSON.stringify({post:n})});case 11:return a=e.sent,e.next=14,a;case 14:if(c=e.sent,200===a.status){e.next=19;break}throw Error(c.message);case 19:A();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/getCMCCache?file="+t.target.textContent);case 2:return r=e.sent,e.next=5,r.json();case 5:if(n=e.sent,200===r.status){e.next=10;break}throw Error(n.message);case 10:D(),g($({},y,{tickers:[]})),A();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(f.a)(s.a.mark((function e(r){var n,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=14;break}return(n=[]).push({portfolioId:S.portfolioId}),e.next=5,fetch(t+"/resetPortfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:n})});case 5:return a=e.sent,e.next=8,a;case 8:if(c=e.sent,200===a.status){e.next=13;break}throw Error(c.message);case 13:setTimeout((function(){A()}),250);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=y.tickers.map((function(e){return a.a.createElement("option",{value:e.tickerId},e.tickerName)})),Z=l.exchangeRates.map((function(e){return a.a.createElement("option",{value:e.rateName},e.rateName)}));return a.a.createElement("div",null,a.a.createElement("div",{className:"outerDiv"},a.a.createElement("div",{className:"leftDiv"},a.a.createElement("h2",null,"CryptoDash")),a.a.createElement("div",{className:"midDiv"},a.a.createElement("h4",null,"Unrealised P&L Total: ",l.selectedExchangeRate[0].symbol+""+(S.portfolioUnrealisedPL*l.selectedExchangeRate[0].rate).toFixed(S.precision))),a.a.createElement("div",{className:"rightDiv"},a.a.createElement("h4",null,"Realised P&L Total: ",l.selectedExchangeRate[0].symbol+""+(S.portfolioRealisedPL*l.selectedExchangeRate[0].rate).toFixed(S.precision)))),a.a.createElement(p.a,{title:"Portfolio View",icons:c,columns:S.portfoliocolumns,data:S.positionData,editable:{onRowDelete:function(e){return new Promise((function(r){"true"===e.active?setTimeout((function(){fetch(t+"/getPrice/"+e.currencyId,{}).then((function(e){return e.json()})).then((function(n){var a=[];a.push({portfolioId:e.portfolioId}),a.push({table:"portfolios"}),a.push({positionId:e.id}),a.push({realisedPL:(n.Items[0].cmcCacheData.quote.USD.price-e.tradePrice)*e.position}),fetch(t+"/exitPosition",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Content-Type, Authorization"},body:JSON.stringify({post:a})}).then((function(e){A(),r()}))}))}),250):(alert("You cannot exit a closed position."),r())}))}}}),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("h3",null,"Trade Entry"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Select currency"),a.a.createElement("td",null,a.a.createElement("select",{onChange:F},Y))),a.a.createElement("tr",null,a.a.createElement("td",null,"Price of currency"),a.a.createElement("td",{id:"tickerPrice"},l.selectedExchangeRate[0].symbol+""+y.tickerPrice*l.selectedExchangeRate[0].rate)),a.a.createElement("tr",null,a.a.createElement("td",null,"Position quantity"),a.a.createElement("td",null,a.a.createElement("input",{id:"positionQty",type:"text"}))),a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement(H.a,{variant:"contained",color:"primary",onClick:B},"Trade"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("h3",null,"System Control"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Reload cache from sandbox"),a.a.createElement("td",null,a.a.createElement(H.a,{variant:"contained",color:"primary",onClick:M},"coinmarketcap.json"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Reload cache from pro"),a.a.createElement("td",null,a.a.createElement(H.a,{variant:"contained",color:"primary",onClick:M},"pro.coinmarketcap.json"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Reset portfolio"),a.a.createElement("td",null,a.a.createElement(H.a,{variant:"contained",color:"primary",onClick:V},"Zero positions"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Currency to view (USD=",l.selectedExchangeRate[0].rate,")"),a.a.createElement("td",null,a.a.createElement("select",{onChange:function(e){var t=Object(u.a)(l.selectedExchangeRate),r=l.exchangeRates.find((function(t){return t.rateName===e.target.value}));(t=[]).push(r),d($({},l,{selectedExchangeRate:t}))}},Z))))))}),null),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.f94f7fab.chunk.js.map